<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supplier Management - LTS Manager</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="./company_layout.css">
    <style>
        .header-container {
            background-color: #6f42c1;
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            margin-bottom: 25px;
        }
        
        .content-container {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 20px;
        }
        
        .supplier-form-container {
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            background: #f8f9fa;
            position: relative;
        }
        
        .supplier-form-container.active {
            border-color: #6f42c1;
            background: #f8f4ff;
        }
        
        .supplier-number-badge {
            position: absolute;
            top: -10px;
            left: 20px;
            background: #6f42c1;
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .image-upload-container {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            background: #fff;
            transition: all 0.3s ease;
            cursor: pointer;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .image-upload-container:hover {
            border-color: #6f42c1;
            background: #f8f4ff;
        }
        
        .image-upload-container.has-image {
            padding: 10px;
        }
        
        .uploaded-image {
            max-width: 100%;
            max-height: 100px;
            object-fit: cover;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .image-actions {
            position: absolute;
            top: 5px;
            right: 5px;
            display: none;
        }
        
        .image-upload-container.has-image:hover .image-actions {
            display: block;
        }
          .remove-image-btn {
            background: rgba(220, 53, 69, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .remove-image-btn:hover {
            background: rgba(220, 53, 69, 1);
            transform: scale(1.1);
        }
        
        .add-supplier-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .add-supplier-btn:hover {
            background: linear-gradient(135deg, #218838, #1c9d7a);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }
        
        .supplier-counter {
            color: #6c757d;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        /* Statistics Cards */
        .stat-card {
            background: linear-gradient(135deg, #fff, #f8f9fa);
            border-radius: 12px;
            padding: 20px;
            border: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            height: 100%;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .stat-icon {
            background: linear-gradient(135deg, #6f42c1, #8b5fbf);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 15px;
        }
        
        .stat-info h4 {
            margin: 0;
            font-size: 28px;
            font-weight: 700;
            color: #2c3e50;
        }
        
        .stat-info p {
            margin: 0;
            color: #6c757d;
            font-size: 14px;
            font-weight: 500;
        }
        
        /* Suppliers Table */
        .suppliers-table {
            margin-top: 20px;
        }
        
        .suppliers-table thead th {
            background: linear-gradient(135deg, #6f42c1, #8b5fbf);
            color: white;
            border: none;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 0.5px;
            padding: 15px 12px;
        }
        
        .suppliers-table tbody tr {
            transition: all 0.2s ease;
        }
        
        .suppliers-table tbody tr:hover {
            background-color: #f8f4ff;
            transform: scale(1.01);
        }
        
        .suppliers-table td {
            padding: 15px 12px;
            vertical-align: middle;
            border-color: #e9ecef;
        }
        
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .status-active {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
        }
        
        .status-inactive {
            background: linear-gradient(135deg, #f8d7da, #f1b0b7);
            color: #721c24;
        }
        
        .status-pending {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            color: #856404;
        }
        
        .action-btn {
            border: none;
            border-radius: 6px;
            padding: 6px 10px;
            margin: 0 2px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-view {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
        }
        
        .btn-edit {
            background: linear-gradient(135deg, #ffc107, #d39e00);
            color: #212529;
        }
        
        .btn-delete {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
        }
        
        /* Remove Supplier Button */
        .remove-supplier-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        /* Tab Navigation */
        .nav-tabs .nav-link {
            border-radius: 12px 12px 0 0;
            border: none;
            background: transparent;
            color: #6c757d;
            font-weight: 500;
            padding: 12px 24px;
            transition: all 0.3s ease;
        }
        
        .nav-tabs .nav-link:hover {
            background: linear-gradient(135deg, #f8f4ff, #e3d9ff);
            color: #6f42c1;
        }
        
        .nav-tabs .nav-link.active {
            background: linear-gradient(135deg, #6f42c1, #8b5fbf);
            color: white;
            border: none;
        }
        
        /* Modal Enhancements */
        .modal-header {
            background: linear-gradient(135deg, #6f42c1, #8b5fbf);
            color: white;
            border-radius: 8px 8px 0 0;
        }
        
        .modal-header .btn-close {
            filter: invert(1);
        }
        
        .supplier-image-gallery {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .supplier-image-gallery img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .supplier-image-gallery img:hover {
            transform: scale(1.1);
            border-color: #6f42c1;
        }
        
        /* Search and Filter */
        .input-group-text {
            background: linear-gradient(135deg, #6f42c1, #8b5fbf);
            color: white;
            border: none;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }
        
        .empty-state i {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-state h4 {
            margin-bottom: 10px;
            color: #495057;
        }
        
        .empty-state p {            margin-bottom: 20px;
        }
        
        .remove-image-btn {
            background: rgba(220, 53, 69, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .remove-image-btn:hover {
            background: rgba(220, 53, 69, 1);
            transform: scale(1.1);
        }
        
        .add-supplier-btn {
            background: linear-gradient(45deg, #6f42c1, #8e5dd9);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .add-supplier-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(111, 66, 193, 0.3);
        }
        
        .remove-supplier-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 14px;
            cursor: pointer;
        }
        
        .supplier-counter {
            background: #e9ecef;
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .supplier-form-container {
                padding: 15px;
            }
            
            .image-upload-container {
                min-height: 80px;
            }
            
            .uploaded-image {
                max-height: 60px;
            }
        }
    </style>
</head>
<body>
    <!-- Top Navbar -->
    <div class="top-navbar">
        <div class="brand">
            <i class="fas fa-cube me-2"></i> LTS MANAGER
        </div>
        <div class="d-flex align-items-center">
            <button class="icon-button me-2">
                <i class="fas fa-bell"></i>
            </button>
            <button class="icon-button me-3">
                <i class="fas fa-cog"></i>
            </button>
            <div class="user-avatar">
                TD
            </div>
        </div>
    </div>

    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <ul class="nav flex-column">            
            <li class="nav-item">
                <a class="nav-link"href="index.html">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link"href="index.html">
                    <i class="fas fa-calendar-alt"></i> Quản lý ngày nghỉ
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link"href="index.html">
                    <i class="fas fa-users"></i> Quản lý QT
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link"href="index.html">
                    <i class="fas fa-tasks"></i> Quản lý dự án
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link"href="index.html">
                    <i class="fas fa-clock"></i> Chấm công
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link"href="index.html">
                    <i class="fas fa-chart-line"></i> Đánh giá định kỳ
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link"href="index.html">
                    <i class="fas fa-graduation-cap"></i> Quản lý kỹ năng
                </a>
            </li>
            <!-- Procurement Section -->
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle"href="index.html" id="procurementDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-shopping-cart"></i> Procurement
                </a>
                <ul class="dropdown-menu" aria-labelledby="procurementDropdown">
                    <li><a class="dropdown-item" href="index.html">
                        <i class="fas fa-file-alt"></i> Request List
                    </a></li>
                    <li><a class="dropdown-item" href="purchase_list.html">
                        <i class="fas fa-shopping-bag"></i> Purchase List
                    </a></li>
                    <li><a class="dropdown-item" href="supplier_select.html">
                        <i class="fas fa-users"></i> Suppliers Select</a></li>
                    <li><a class="dropdown-item" href="it_review_list.html">
                        <i class="fas fa-laptop"></i> IT Review Queue</a></li>
                    <li><a class="dropdown-item" href="dl_payment_confirmation_list.html">
                        <i class="fas fa-truck"></i> DL Confirm Payment</a></li>
                    <li><a class="dropdown-item" href="accountant_document_review.html">
                        <i class="fas fa-list"></i> Document Review</a></li>
                    <li><a class="dropdown-item" href="advance_payment_approval_page.html">
                        <i class="fas fa-receipt"></i> Advance Payment Approval</a></li>
                    <li><a class="dropdown-item" href="accountant_reimbursement_approval.html">                        <i class="fas fa-calculator"></i> Reimbursement Processing</a></li>
                    <li><a class="dropdown-item active" href="supplier_management.html">
                        <i class="fas fa-building"></i> Supplier Management</a></li>
                </ul>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="header-container">
            <h1><i class="fas fa-building me-2"></i>Supplier Management</h1>
            <p class="mb-0">Add and manage suppliers with detailed information and product images</p>
        </div>
          <!-- Supplier Management Content -->
        <div class="content-container">
            <!-- Navigation Tabs -->
            <ul class="nav nav-tabs nav-justified mb-4" id="supplierTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="list-tab" data-bs-toggle="tab" data-bs-target="#list-tab-pane" type="button" role="tab">
                        <i class="fas fa-list me-2"></i>Suppliers List
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="add-tab" data-bs-toggle="tab" data-bs-target="#add-tab-pane" type="button" role="tab">
                        <i class="fas fa-plus me-2"></i>Add Suppliers
                    </button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="supplierTabsContent">
                <!-- Suppliers List Tab -->
                <div class="tab-pane fade show active" id="list-tab-pane" role="tabpanel">
                    <!-- Search and Filter Section -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-search"></i></span>
                                <input type="text" class="form-control" id="searchSuppliers" placeholder="Search suppliers by name, type, or email...">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <select class="form-select" id="filterByType">
                                <option value="">All Types</option>
                                <option value="Hardware Vendor">Hardware Vendor</option>
                                <option value="Software Provider">Software Provider</option>
                                <option value="Service Provider">Service Provider</option>
                                <option value="Manufacturer">Manufacturer</option>
                                <option value="Distributor">Distributor</option>
                                <option value="Consultant">Consultant</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-primary w-100" id="addNewSupplierBtn">
                                <i class="fas fa-plus me-1"></i> Add New Supplier
                            </button>
                        </div>
                    </div>

                    <!-- Suppliers Statistics -->
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-building"></i></div>
                                <div class="stat-info">
                                    <h4 id="totalSuppliers">0</h4>
                                    <p>Total Suppliers</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="stat-info">
                                    <h4 id="activeSuppliers">0</h4>
                                    <p>Active Suppliers</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-clock"></i></div>
                                <div class="stat-info">
                                    <h4 id="recentlyAdded">0</h4>
                                    <p>Added This Month</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-star"></i></div>
                                <div class="stat-info">
                                    <h4 id="topRated">0</h4>
                                    <p>Top Rated</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Suppliers Table -->
                    <div class="table-responsive">
                        <table class="table table-hover suppliers-table">
                            <thead>
                                <tr>
                                    <th>Company</th>
                                    <th>Type</th>
                                    <th>Contact</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="suppliersTableBody">
                                <!-- Suppliers will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Add Suppliers Tab -->
                <div class="tab-pane fade" id="add-tab-pane" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div>
                            <h3>Add Multiple Suppliers</h3>
                            <div class="supplier-counter">
                                <i class="fas fa-building me-2"></i>
                                Total Suppliers: <span id="supplierCount">1</span>
                            </div>
                        </div>
                        <div>
                            <button class="btn add-supplier-btn me-2" id="addAnotherSupplierBtn">
                                <i class="fas fa-plus me-1"></i> Add Another Supplier
                            </button>
                            <button class="btn btn-success" id="saveAllSuppliersBtn">
                                <i class="fas fa-save me-1"></i> Save All Suppliers
                            </button>
                        </div>
                    </div>            
            <form id="multipleSupplierForm">
                <div id="supplierFormsContainer">
                    <!-- Initial Supplier Form -->
                    <div class="supplier-form-container active" data-supplier-index="1">
                        <div class="supplier-number-badge">Supplier #1</div>
                        <button type="button" class="btn btn-sm btn-outline-danger remove-supplier-btn" onclick="removeSupplierForm(1)">
                            <i class="fas fa-times"></i>
                        </button>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="supplierName1" class="form-label">
                                    <i class="fas fa-building me-1"></i>Company Name *
                                </label>
                                <input type="text" class="form-control" id="supplierName1" name="supplierName1" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="supplierType1" class="form-label">
                                    <i class="fas fa-tags me-1"></i>Supplier Type *
                                </label>
                                <select class="form-select" id="supplierType1" name="supplierType1" required>
                                    <option value="">Select Type</option>
                                    <option value="Hardware Vendor">Hardware Vendor</option>
                                    <option value="Software Provider">Software Provider</option>
                                    <option value="Service Provider">Service Provider</option>
                                    <option value="Manufacturer">Manufacturer</option>
                                    <option value="Distributor">Distributor</option>
                                    <option value="Consultant">Consultant</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="contactName1" class="form-label">
                                    <i class="fas fa-user me-1"></i>Contact Person *
                                </label>
                                <input type="text" class="form-control" id="contactName1" name="contactName1" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="contactEmail1" class="form-label">
                                    <i class="fas fa-envelope me-1"></i>Email *
                                </label>
                                <input type="email" class="form-control" id="contactEmail1" name="contactEmail1" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="contactPhone1" class="form-label">
                                    <i class="fas fa-phone me-1"></i>Phone
                                </label>
                                <input type="tel" class="form-control" id="contactPhone1" name="contactPhone1">
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="website1" class="form-label">
                                    <i class="fas fa-globe me-1"></i>Website
                                </label>
                                <input type="url" class="form-control" id="website1" name="website1" placeholder="https://">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="specialization1" class="form-label">
                                    <i class="fas fa-cogs me-1"></i>Specialization
                                </label>
                                <input type="text" class="form-control" id="specialization1" name="specialization1" placeholder="e.g., Enterprise Software, Network Equipment">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="address1" class="form-label">
                                <i class="fas fa-map-marker-alt me-1"></i>Address
                            </label>
                            <textarea class="form-control" id="address1" name="address1" rows="2" placeholder="Full business address"></textarea>
                        </div>
                          
                        
                        <div class="row mb-3">
                            <div class="col-12">
                                <label class="form-label">
                                    <i class="fas fa-images me-1"></i>Product Images (Up to 3)
                                </label>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="image-upload-container" onclick="triggerImageUpload('image1_1')">
                                    <input type="file" id="image1_1" name="image1_1" accept="image/*" style="display: none;" onchange="handleImageUpload(this, 1, 1)">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-cloud-upload-alt fa-2x mb-2 text-muted"></i>
                                        <div class="text-muted">Click to upload image 1</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="image-upload-container" onclick="triggerImageUpload('image1_2')">
                                    <input type="file" id="image1_2" name="image1_2" accept="image/*" style="display: none;" onchange="handleImageUpload(this, 1, 2)">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-cloud-upload-alt fa-2x mb-2 text-muted"></i>
                                        <div class="text-muted">Click to upload image 2</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="image-upload-container" onclick="triggerImageUpload('image1_3')">
                                    <input type="file" id="image1_3" name="image1_3" accept="image/*" style="display: none;" onchange="handleImageUpload(this, 1, 3)">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-cloud-upload-alt fa-2x mb-2 text-muted"></i>
                                        <div class="text-muted">Click to upload image 3</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="notes1" class="form-label">
                                <i class="fas fa-sticky-note me-1"></i>Additional Notes
                            </label>
                            <textarea class="form-control" id="notes1" name="notes1" rows="2" placeholder="Any additional information about this supplier..."></textarea>
                        </div>
                    </div>
                </div>
            </form>
                </div>
            </div>
        </div>

        <!-- Supplier Details Modal -->
        <div class="modal fade" id="supplierDetailsModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"><i class="fas fa-building me-2"></i>Supplier Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body" id="supplierDetailsContent">
                        <!-- Supplier details will be loaded here -->
                    </div>                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-info me-2" id="viewSupplierHistoryBtn">
                            <i class="fas fa-history me-1"></i>View History
                        </button>
                        <button type="button" class="btn btn-primary" id="editSupplierBtn">
                            <i class="fas fa-edit me-1"></i>Edit Supplier
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Supplier Modal -->
        <div class="modal fade" id="editSupplierModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"><i class="fas fa-edit me-2"></i>Edit Supplier</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <form id="editSupplierForm">
                            <input type="hidden" id="editSupplierId" name="supplierId">
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="editSupplierName" class="form-label">
                                        <i class="fas fa-building me-1"></i>Company Name *
                                    </label>
                                    <input type="text" class="form-control" id="editSupplierName" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="editSupplierType" class="form-label">
                                        <i class="fas fa-tags me-1"></i>Supplier Type *
                                    </label>
                                    <select class="form-select" id="editSupplierType" required>
                                        <option value="">Select Type</option>
                                        <option value="Hardware Vendor">Hardware Vendor</option>
                                        <option value="Software Provider">Software Provider</option>
                                        <option value="Service Provider">Service Provider</option>
                                        <option value="Manufacturer">Manufacturer</option>
                                        <option value="Distributor">Distributor</option>
                                        <option value="Consultant">Consultant</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="editContactName" class="form-label">
                                        <i class="fas fa-user me-1"></i>Contact Person *
                                    </label>
                                    <input type="text" class="form-control" id="editContactName" required>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="editContactEmail" class="form-label">
                                        <i class="fas fa-envelope me-1"></i>Email *
                                    </label>
                                    <input type="email" class="form-control" id="editContactEmail" required>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="editContactPhone" class="form-label">
                                        <i class="fas fa-phone me-1"></i>Phone
                                    </label>
                                    <input type="tel" class="form-control" id="editContactPhone">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="editWebsite" class="form-label">
                                        <i class="fas fa-globe me-1"></i>Website
                                    </label>
                                    <input type="url" class="form-control" id="editWebsite">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="editSpecialization" class="form-label">
                                        <i class="fas fa-cogs me-1"></i>Specialization
                                    </label>
                                    <input type="text" class="form-control" id="editSpecialization">
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="editAddress" class="form-label">
                                    <i class="fas fa-map-marker-alt me-1"></i>Address
                                </label>
                                <textarea class="form-control" id="editAddress" rows="2"></textarea>
                            </div>
                              <div class="row">
                                <div class="col-md-12 mb-3">
                                    <label for="editStatus" class="form-label">
                                        <i class="fas fa-toggle-on me-1"></i>Status
                                    </label>
                                    <select class="form-select" id="editStatus">
                                        <option value="Active">Active</option>
                                        <option value="Inactive">Inactive</option>
                                        <option value="Pending">Pending</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="editNotes" class="form-label">
                                    <i class="fas fa-sticky-note me-1"></i>Additional Notes
                                </label>
                                <textarea class="form-control" id="editNotes" rows="2"></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" id="saveSupplierChangesBtn">
                            <i class="fas fa-save me-1"></i>Save Changes
                        </button>
                    </div>
                </div>
            </div>        
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample suppliers data (in a real application, this would come from a database)
        let suppliers = [
            {
                id: 1,
                name: "TechPro Solutions",
                type: "Hardware Vendor",
                contact: "John Smith",
                email: "john@techpro.com",
                phone: "+1-555-0123",
                website: "https://techpro.com",
                specialization: "Enterprise Network Equipment",                address: "123 Tech Street, Silicon Valley, CA 94000",
                status: "Active",
                notes: "Reliable supplier for network infrastructure",
                dateAdded: "2024-12-15",
                images: ["tech1.jpg", "tech2.jpg"]
            },
            {
                id: 2,
                name: "Software Dynamics",
                type: "Software Provider",
                contact: "Sarah Johnson",
                email: "sarah@softdyn.com",
                phone: "+1-555-0456",
                website: "https://softwaedynamics.com",
                specialization: "Enterprise Software Solutions",                address: "456 Innovation Blvd, Austin, TX 78701",
                status: "Active",
                notes: "Specializes in custom enterprise applications",
                dateAdded: "2024-12-10",
                images: ["soft1.jpg"]
            },
            {
                id: 3,
                name: "Global Manufacturing Co",
                type: "Manufacturer",
                contact: "Mike Chen",
                email: "mike@globalmanuf.com",
                phone: "+1-555-0789",
                website: "https://globalmanuf.com",
                specialization: "Industrial Equipment Manufacturing",                address: "789 Factory Road, Detroit, MI 48201",
                status: "Pending",
                notes: "New supplier, currently in evaluation process",
                dateAdded: "2025-01-05",
                images: []
            }
        ];

        let supplierCounter = 1;
        let editingSupplierId = null;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadSuppliersList();
            updateStatistics();
            
            // Tab switching event
            document.querySelectorAll('[data-bs-toggle="tab"]').forEach(tab => {
                tab.addEventListener('shown.bs.tab', function (e) {
                    if (e.target.id === 'list-tab') {
                        loadSuppliersList();
                    }
                });
            });

            // Add new supplier button
            document.getElementById('addNewSupplierBtn').addEventListener('click', function() {
                const addTab = new bootstrap.Tab(document.getElementById('add-tab'));
                addTab.show();
            });            // Search functionality
            document.getElementById('searchSuppliers').addEventListener('input', filterSuppliers);
            document.getElementById('filterByType').addEventListener('change', filterSuppliers);

            // View supplier history button
            document.getElementById('viewSupplierHistoryBtn').addEventListener('click', function() {
                const supplierId = this.getAttribute('data-supplier-id');
                const supplierName = this.getAttribute('data-supplier-name');
                if (supplierId) {
                    // Redirect to supplier history page with supplier ID
                    window.location.href = `supplier_history.html?supplierId=${supplierId}&supplierName=${encodeURIComponent(supplierName)}`;
                }
            });
        });

        // Load suppliers list
        function loadSuppliersList() {
            const tbody = document.getElementById('suppliersTableBody');
            
            if (suppliers.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center">
                            <div class="empty-state">
                                <i class="fas fa-building"></i>
                                <h4>No Suppliers Found</h4>
                                <p>Start by adding your first supplier to the system.</p>
                                <button class="btn btn-primary" onclick="document.getElementById('add-tab').click()">
                                    <i class="fas fa-plus me-1"></i>Add First Supplier
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = suppliers.map(supplier => `
                <tr>
                    <td>
                        <div class="d-flex align-items-center">
                            <div class="supplier-avatar me-3">
                                <i class="fas fa-building"></i>
                            </div>
                            <div>
                                <div class="fw-bold">${supplier.name}</div>
                                <small class="text-muted">${supplier.specialization || 'General'}</small>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span class="badge bg-secondary">${supplier.type}</span>
                    </td>
                    <td>${supplier.contact}</td>
                    <td>
                        <a href="mailto:${supplier.email}" class="text-decoration-none">${supplier.email}</a>
                    </td>
                    <td>${supplier.phone || 'N/A'}</td>
                    <td>
                        <span class="status-badge status-${supplier.status.toLowerCase()}">${supplier.status}</span>
                    </td>
                    <td>
                        <button class="action-btn btn-view" onclick="viewSupplier(${supplier.id})" title="View Details">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-btn btn-edit" onclick="editSupplier(${supplier.id})" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn btn-delete" onclick="deleteSupplier(${supplier.id})" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // Update statistics
        function updateStatistics() {
            const totalSuppliers = suppliers.length;
            const activeSuppliers = suppliers.filter(s => s.status === 'Active').length;
            const thisMonth = new Date().toISOString().slice(0, 7); // YYYY-MM
            const recentlyAdded = suppliers.filter(s => s.dateAdded.startsWith(thisMonth)).length;
            const topRated = suppliers.filter(s => s.status === 'Active').length;

            document.getElementById('totalSuppliers').textContent = totalSuppliers;
            document.getElementById('activeSuppliers').textContent = activeSuppliers;
            document.getElementById('recentlyAdded').textContent = recentlyAdded;
            document.getElementById('topRated').textContent = topRated;
        }

        // Filter suppliers
        function filterSuppliers() {
            const searchTerm = document.getElementById('searchSuppliers').value.toLowerCase();
            const typeFilter = document.getElementById('filterByType').value;
            
            let filteredSuppliers = suppliers;
            
            if (searchTerm) {
                filteredSuppliers = filteredSuppliers.filter(supplier => 
                    supplier.name.toLowerCase().includes(searchTerm) ||
                    supplier.type.toLowerCase().includes(searchTerm) ||
                    supplier.email.toLowerCase().includes(searchTerm) ||
                    supplier.contact.toLowerCase().includes(searchTerm)
                );
            }
            
            if (typeFilter) {
                filteredSuppliers = filteredSuppliers.filter(supplier => supplier.type === typeFilter);
            }
            
            // Temporarily store the full suppliers array and replace with filtered results
            const originalSuppliers = suppliers;
            suppliers = filteredSuppliers;
            loadSuppliersList();
            suppliers = originalSuppliers; // Restore original array
        }

        // View supplier details
        function viewSupplier(id) {
            const supplier = suppliers.find(s => s.id === id);
            if (!supplier) return;

            const modal = new bootstrap.Modal(document.getElementById('supplierDetailsModal'));
            const content = document.getElementById('supplierDetailsContent');
            
            content.innerHTML = `
                <div class="row">
                    <div class="col-md-8">
                        <h5 class="text-primary mb-3">${supplier.name}</h5>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <strong>Type:</strong> ${supplier.type}<br>
                                <strong>Contact:</strong> ${supplier.contact}<br>
                                <strong>Email:</strong> <a href="mailto:${supplier.email}">${supplier.email}</a><br>
                                <strong>Phone:</strong> ${supplier.phone || 'N/A'}<br>
                            </div>                            <div class="col-md-6">
                                <strong>Website:</strong> ${supplier.website ? `<a href="${supplier.website}" target="_blank">${supplier.website}</a>` : 'N/A'}<br>
                                <strong>Status:</strong> <span class="status-badge status-${supplier.status.toLowerCase()}">${supplier.status}</span><br>
                                <strong>Date Added:</strong> ${new Date(supplier.dateAdded).toLocaleDateString()}<br>
                            </div>
                        </div>
                        ${supplier.specialization ? `<div class="mb-3"><strong>Specialization:</strong> ${supplier.specialization}</div>` : ''}
                        ${supplier.address ? `<div class="mb-3"><strong>Address:</strong><br>${supplier.address}</div>` : ''}
                        ${supplier.notes ? `<div class="mb-3"><strong>Notes:</strong><br>${supplier.notes}</div>` : ''}
                    </div>
                    <div class="col-md-4">
                        ${supplier.images && supplier.images.length > 0 ? `
                            <h6>Product Images:</h6>
                            <div class="supplier-image-gallery">
                                ${supplier.images.map(img => `<img src="images/${img}" alt="Product" onclick="showImageModal('${img}')">`).join('')}
                            </div>
                        ` : '<p class="text-muted">No images available</p>'}
                    </div>
                </div>
            `;
              // Set the edit button to edit this supplier
            document.getElementById('editSupplierBtn').onclick = () => {
                modal.hide();
                editSupplier(id);
            };
            
            // Set the history button data attributes
            const historyBtn = document.getElementById('viewSupplierHistoryBtn');
            historyBtn.setAttribute('data-supplier-id', supplier.id);
            historyBtn.setAttribute('data-supplier-name', supplier.name);
            
            modal.show();
        }

        // Edit supplier
        function editSupplier(id) {
            const supplier = suppliers.find(s => s.id === id);
            if (!supplier) return;

            editingSupplierId = id;
            const modal = new bootstrap.Modal(document.getElementById('editSupplierModal'));
            
            // Populate the edit form
            document.getElementById('editSupplierId').value = supplier.id;
            document.getElementById('editSupplierName').value = supplier.name;
            document.getElementById('editSupplierType').value = supplier.type;
            document.getElementById('editContactName').value = supplier.contact;
            document.getElementById('editContactEmail').value = supplier.email;
            document.getElementById('editContactPhone').value = supplier.phone || '';
            document.getElementById('editWebsite').value = supplier.website || '';
            document.getElementById('editSpecialization').value = supplier.specialization || '';            document.getElementById('editAddress').value = supplier.address || '';
            document.getElementById('editStatus').value = supplier.status;
            document.getElementById('editNotes').value = supplier.notes || '';
            
            modal.show();
        }

        // Save supplier changes
        document.getElementById('saveSupplierChangesBtn').addEventListener('click', function() {
            const form = document.getElementById('editSupplierForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const supplierIndex = suppliers.findIndex(s => s.id === editingSupplierId);
            if (supplierIndex === -1) return;

            // Update supplier data
            suppliers[supplierIndex] = {
                ...suppliers[supplierIndex],
                name: document.getElementById('editSupplierName').value,
                type: document.getElementById('editSupplierType').value,
                contact: document.getElementById('editContactName').value,
                email: document.getElementById('editContactEmail').value,
                phone: document.getElementById('editContactPhone').value,
                website: document.getElementById('editWebsite').value,
                specialization: document.getElementById('editSpecialization').value,                address: document.getElementById('editAddress').value,
                status: document.getElementById('editStatus').value,
                notes: document.getElementById('editNotes').value
            };

            // Show loading state
            this.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>Saving...';
            this.disabled = true;

            setTimeout(() => {
                bootstrap.Modal.getInstance(document.getElementById('editSupplierModal')).hide();
                loadSuppliersList();
                updateStatistics();
                
                // Show success message
                showNotification('Supplier updated successfully!', 'success');
                
                // Reset button
                this.innerHTML = '<i class="fas fa-save me-1"></i>Save Changes';
                this.disabled = false;
                editingSupplierId = null;
            }, 1000);
        });

        // Delete supplier
        function deleteSupplier(id) {
            const supplier = suppliers.find(s => s.id === id);
            if (!supplier) return;

            if (confirm(`Are you sure you want to delete "${supplier.name}"? This action cannot be undone.`)) {
                suppliers = suppliers.filter(s => s.id !== id);
                loadSuppliersList();
                updateStatistics();
                showNotification('Supplier deleted successfully!', 'success');
            }
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
            alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; max-width: 400px;';
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentElement) {
                    alertDiv.parentElement.removeChild(alertDiv);
                }
            }, 5000);
        }

        // Multiple Supplier Form Functions (existing functionality improved)
        
        // Add another supplier form
        document.getElementById('addAnotherSupplierBtn').addEventListener('click', function() {
            supplierCounter++;
            const container = document.getElementById('supplierFormsContainer');
            const newForm = createSupplierForm(supplierCounter);
            container.appendChild(newForm);
            updateSupplierCount();
            
            // Scroll to new form
            newForm.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });

        // Create supplier form
        function createSupplierForm(index) {
            const formContainer = document.createElement('div');
            formContainer.className = 'supplier-form-container';
            formContainer.setAttribute('data-supplier-index', index);
            
            formContainer.innerHTML = `
                <div class="supplier-number-badge">Supplier #${index}</div>
                <button type="button" class="btn btn-sm btn-outline-danger remove-supplier-btn" onclick="removeSupplierForm(${index})">
                    <i class="fas fa-times"></i>
                </button>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="supplierName${index}" class="form-label">
                            <i class="fas fa-building me-1"></i>Company Name *
                        </label>
                        <input type="text" class="form-control" id="supplierName${index}" name="supplierName${index}" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="supplierType${index}" class="form-label">
                            <i class="fas fa-tags me-1"></i>Supplier Type *
                        </label>
                        <select class="form-select" id="supplierType${index}" name="supplierType${index}" required>
                            <option value="">Select Type</option>
                            <option value="Hardware Vendor">Hardware Vendor</option>
                            <option value="Software Provider">Software Provider</option>
                            <option value="Service Provider">Service Provider</option>
                            <option value="Manufacturer">Manufacturer</option>
                            <option value="Distributor">Distributor</option>
                            <option value="Consultant">Consultant</option>
                        </select>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="contactName${index}" class="form-label">
                            <i class="fas fa-user me-1"></i>Contact Person *
                        </label>
                        <input type="text" class="form-control" id="contactName${index}" name="contactName${index}" required>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="contactEmail${index}" class="form-label">
                            <i class="fas fa-envelope me-1"></i>Email *
                        </label>
                        <input type="email" class="form-control" id="contactEmail${index}" name="contactEmail${index}" required>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="contactPhone${index}" class="form-label">
                            <i class="fas fa-phone me-1"></i>Phone
                        </label>
                        <input type="tel" class="form-control" id="contactPhone${index}" name="contactPhone${index}">
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="website${index}" class="form-label">
                            <i class="fas fa-globe me-1"></i>Website
                        </label>
                        <input type="url" class="form-control" id="website${index}" name="website${index}" placeholder="https://">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="specialization${index}" class="form-label">
                            <i class="fas fa-cogs me-1"></i>Specialization
                        </label>
                        <input type="text" class="form-control" id="specialization${index}" name="specialization${index}" placeholder="e.g., Enterprise Software, Network Equipment">
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="address${index}" class="form-label">
                        <i class="fas fa-map-marker-alt me-1"></i>Address
                    </label>
                    <textarea class="form-control" id="address${index}" name="address${index}" rows="2" placeholder="Full business address"></textarea>                </div>
                
                <div class="row mb-3">
                    <div class="col-12">
                        <label class="form-label">
                            <i class="fas fa-images me-1"></i>Product Images (Up to 3)
                        </label>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="image-upload-container" onclick="triggerImageUpload('image${index}_1')">
                            <input type="file" id="image${index}_1" name="image${index}_1" accept="image/*" style="display: none;" onchange="handleImageUpload(this, ${index}, 1)">
                            <div class="upload-placeholder">
                                <i class="fas fa-cloud-upload-alt fa-2x mb-2 text-muted"></i>
                                <div class="text-muted">Click to upload image 1</div>
                            </div>
                            <div class="image-actions">
                                <button type="button" class="remove-image-btn" onclick="removeImage(${index}, 1)">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="image-upload-container" onclick="triggerImageUpload('image${index}_2')">
                            <input type="file" id="image${index}_2" name="image${index}_2" accept="image/*" style="display: none;" onchange="handleImageUpload(this, ${index}, 2)">
                            <div class="upload-placeholder">
                                <i class="fas fa-cloud-upload-alt fa-2x mb-2 text-muted"></i>
                                <div class="text-muted">Click to upload image 2</div>
                            </div>
                            <div class="image-actions">
                                <button type="button" class="remove-image-btn" onclick="removeImage(${index}, 2)">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="image-upload-container" onclick="triggerImageUpload('image${index}_3')">
                            <input type="file" id="image${index}_3" name="image${index}_3" accept="image/*" style="display: none;" onchange="handleImageUpload(this, ${index}, 3)">
                            <div class="upload-placeholder">
                                <i class="fas fa-cloud-upload-alt fa-2x mb-2 text-muted"></i>
                                <div class="text-muted">Click to upload image 3</div>
                            </div>
                            <div class="image-actions">
                                <button type="button" class="remove-image-btn" onclick="removeImage(${index}, 3)">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="notes${index}" class="form-label">
                        <i class="fas fa-sticky-note me-1"></i>Additional Notes
                    </label>
                    <textarea class="form-control" id="notes${index}" name="notes${index}" rows="2" placeholder="Any additional information about this supplier..."></textarea>
                </div>
            `;
            
            return formContainer;
        }

        // Remove supplier form
        function removeSupplierForm(index) {
            if (supplierCounter <= 1) {
                showNotification('You must have at least one supplier form.', 'warning');
                return;
            }
            
            if (confirm('Are you sure you want to remove this supplier form?')) {
                const formToRemove = document.querySelector(`[data-supplier-index="${index}"]`);
                formToRemove.remove();
                supplierCounter--;
                updateSupplierCount();
                renumberSupplierForms();
            }
        }

        // Update supplier count display
        function updateSupplierCount() {
            document.getElementById('supplierCount').textContent = supplierCounter;
        }

        // Renumber supplier forms after removal
        function renumberSupplierForms() {
            const forms = document.querySelectorAll('.supplier-form-container');
            forms.forEach((form, index) => {
                const newIndex = index + 1;
                form.setAttribute('data-supplier-index', newIndex);
                form.querySelector('.supplier-number-badge').textContent = `Supplier #${newIndex}`;
            });
        }

        // Image upload functions (existing functionality)
        function triggerImageUpload(inputId) {
            event.stopPropagation();
            document.getElementById(inputId).click();
        }

        function handleImageUpload(input, supplierIndex, imageIndex) {
            const file = input.files[0];
            if (file) {
                // Validate file type
                if (!file.type.startsWith('image/')) {
                    showNotification('Please select a valid image file.', 'danger');
                    return;
                }
                
                // Validate file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    showNotification('Image size should be less than 5MB.', 'danger');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const container = input.parentElement;
                    container.classList.add('has-image');
                    
                    // Replace upload placeholder with image
                    container.innerHTML = `
                        <img src="${e.target.result}" alt="Product Image ${imageIndex}" class="uploaded-image">
                        <div class="image-actions">
                            <button type="button" class="remove-image-btn" onclick="removeImage(${supplierIndex}, ${imageIndex})">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <input type="file" id="image${supplierIndex}_${imageIndex}" name="image${supplierIndex}_${imageIndex}" accept="image/*" style="display: none;" onchange="handleImageUpload(this, ${supplierIndex}, ${imageIndex})">
                    `;
                };
                reader.readAsDataURL(file);
            }
        }

        function removeImage(supplierIndex, imageIndex) {
            event.stopPropagation();
            if (confirm('Remove this image?')) {
                const container = document.querySelector(`#image${supplierIndex}_${imageIndex}`).parentElement;
                container.classList.remove('has-image');
                container.innerHTML = `
                    <input type="file" id="image${supplierIndex}_${imageIndex}" name="image${supplierIndex}_${imageIndex}" accept="image/*" style="display: none;" onchange="handleImageUpload(this, ${supplierIndex}, ${imageIndex})">
                    <div class="upload-placeholder">
                        <i class="fas fa-cloud-upload-alt fa-2x mb-2 text-muted"></i>
                        <div class="text-muted">Click to upload image ${imageIndex}</div>
                    </div>
                    <div class="image-actions">
                        <button type="button" class="remove-image-btn" onclick="removeImage(${supplierIndex}, ${imageIndex})">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
                container.setAttribute('onclick', `triggerImageUpload('image${supplierIndex}_${imageIndex}')`);
            }
        }

        // Save all suppliers
        document.getElementById('saveAllSuppliersBtn').addEventListener('click', function() {
            const form = document.getElementById('multipleSupplierForm');
            
            // Validate all forms
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            // Collect all supplier data
            const newSuppliers = [];
            const supplierForms = document.querySelectorAll('.supplier-form-container');
            
            supplierForms.forEach((supplierForm, index) => {
                const supplierIndex = index + 1;
                const supplierData = {
                    id: Date.now() + index, // Simple ID generation
                    name: document.getElementById(`supplierName${supplierIndex}`).value,
                    type: document.getElementById(`supplierType${supplierIndex}`).value,
                    contact: document.getElementById(`contactName${supplierIndex}`).value,
                    email: document.getElementById(`contactEmail${supplierIndex}`).value,
                    phone: document.getElementById(`contactPhone${supplierIndex}`).value,
                    website: document.getElementById(`website${supplierIndex}`).value,
                    specialization: document.getElementById(`specialization${supplierIndex}`).value,                    address: document.getElementById(`address${supplierIndex}`).value,
                    notes: document.getElementById(`notes${supplierIndex}`).value,
                    status: 'Active',
                    dateAdded: new Date().toISOString().split('T')[0],
                    images: []
                };
                
                // Collect images for this supplier
                for (let imgIndex = 1; imgIndex <= 3; imgIndex++) {
                    const imgInput = document.getElementById(`image${supplierIndex}_${imgIndex}`);
                    if (imgInput && imgInput.files[0]) {
                        supplierData.images.push(`supplier_${supplierData.id}_${imgIndex}.jpg`);
                    }
                }
                
                newSuppliers.push(supplierData);
            });
            
            // Show loading state
            this.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>Saving...';
            this.disabled = true;
            
            // Simulate save process
            setTimeout(() => {
                // Add new suppliers to the main array
                suppliers.push(...newSuppliers);
                
                // Show success message
                showNotification(`Successfully saved ${newSuppliers.length} supplier(s) to the database!`, 'success');
                
                // Reset button
                this.innerHTML = '<i class="fas fa-save me-1"></i> Save All Suppliers';
                this.disabled = false;
                
                // Reset form
                form.reset();
                
                // Switch to list tab
                const listTab = new bootstrap.Tab(document.getElementById('list-tab'));
                listTab.show();
                
                // Update display
                loadSuppliersList();
                updateStatistics();
                
                console.log('Saved suppliers:', newSuppliers);
            }, 2000);
        });

        // Make supplier forms clickable to activate
        document.addEventListener('click', function(e) {
            const supplierForm = e.target.closest('.supplier-form-container');
            if (supplierForm) {
                // Remove active class from all forms
                document.querySelectorAll('.supplier-form-container').forEach(form => {
                    form.classList.remove('active');
                });
                // Add active class to clicked form
                supplierForm.classList.add('active');
            }
        });
    </script>
